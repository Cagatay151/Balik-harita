<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Canlı Balık Haritası</title>

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
  #map { height: 100vh; }
  .legend {
    background: white;
    padding: 10px;
    line-height: 18px;
    font-size: 14px;
  }
</style>
</head>

<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map("map").setView([36.5, 30.5], 8);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  maxZoom: 18
}).addTo(map);

function metreToDegree(m) {
  return m / 111000;
}

function denizeKaydir(lat, lon) {
  // 100 – 750 metre
  const metre = Math.random() * (750 - 100) + 100;
  const derece = metre / 111000;

  // Akdeniz için deniz yönü (güney – güneydoğu)
  const aci = (Math.random() * 120 + 150) * Math.PI / 180;

  const dLat = Math.cos(aci) * derece;
  const dLon = Math.sin(aci) * derece;

  return [
    lat + dLat,
    lon + dLon
  ];
}


fetch("2.csv")
.then(res => res.text())
.then(text => {
  const rows = text.trim().split("\n").slice(1);

  rows.forEach(line => {
    const parts = line.split(";");
    if (parts.length < 3) return;

    const tur = parts[0];
    const lat = parseFloat(parts[1]);
    const lon = parseFloat(parts[2]);

    if (isNaN(lat) || isNaN(lon)) return;

    const yeni = denizeKaydir(lat, lon);

    let renk = "gray";
    if (tur.includes("Balon")) renk = "red";
    if (tur.includes("Aslan")) renk = "orange";
    if (tur.includes("Sokar")) renk = "blue";

    L.circleMarker(yeni, {
      radius: 6,
      color: renk,
      fillColor: renk,
      fillOpacity: 0.8
    }).addTo(map);
  });
});
</script>
</body>
</html>



